#!/bin/bash
# PDFChopper launcher script
VENV="$HOME/.pdfchopper/venv"
APP="/usr/local/bin/pdfchopper.py"

# Create venv if it doesn't exist
if [ ! -d "$VENV" ]; then
    echo "Creating virtual environment at $VENV"
    python3 -m venv "$VENV"
    echo "Installing dependencies in the virtual environment"
    "$VENV/bin/pip" install tkinterdnd2

    echo "Creating shortcut for PDFChopper in the user's applications directory"
    USER_DESKTOP_DIR="$HOME/.local/share/applications"
    mkdir -p "$USER_DESKTOP_DIR"
    cp "/usr/share/applications/pdfchopper.desktop" "$USER_DESKTOP_DIR/pdfchopper.desktop"
    cp "/usr/share/applications/pdfchopper.desktop" "$HOME/Desktop/pdfchopper.desktop"
fi
echo "Launching PDFChopper using the virtual environment's Python interpreter in $VENV"
# Launch the app using the venv's python
"$VENV/bin/python" "$APP" "$@"
